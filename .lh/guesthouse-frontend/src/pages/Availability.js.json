{
    "sourceFile": "guesthouse-frontend/src/pages/Availability.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1757270829864,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1757271449487,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,12 +6,18 @@\n   const [summary, setSummary] = useState({ daily: {}, weekly: {}, monthly: {} });\r\n   const [view, setView] = useState(\"daily\");\r\n \r\n   useEffect(() => {\r\n-    fetch(\"http://localhost:5000/api/bookings/summary\")\r\n-      .then((res) => res.json())\r\n-      .then((data) => setSummary(data))\r\n-      .catch((err) => console.error(\"Availability fetch error:\", err));\r\n+    const fetchData = () => {\r\n+      fetch(\"http://localhost:5000/api/bookings/summary\")\r\n+        .then((res) => res.json())\r\n+        .then((data) => setSummary(data))\r\n+        .catch((err) => console.error(\"Availability fetch error:\", err));\r\n+    };\r\n+\r\n+    fetchData(); // first call\r\n+    const interval = setInterval(fetchData, 30000); // ‡§π‡§∞ 30 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§™‡§∞ refresh\r\n+    return () => clearInterval(interval);\r\n   }, []);\r\n \r\n   const data = summary[view] || {};\r\n \r\n"
                },
                {
                    "date": 1757873100684,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,27 +4,41 @@\n \r\n const Availability = () => {\r\n   const [summary, setSummary] = useState({ daily: {}, weekly: {}, monthly: {} });\r\n   const [view, setView] = useState(\"daily\");\r\n+  const [loading, setLoading] = useState(true);\r\n \r\n   useEffect(() => {\r\n     const fetchData = () => {\r\n       fetch(\"http://localhost:5000/api/bookings/summary\")\r\n         .then((res) => res.json())\r\n-        .then((data) => setSummary(data))\r\n-        .catch((err) => console.error(\"Availability fetch error:\", err));\r\n+        .then((data) => {\r\n+          setSummary(data);\r\n+          setLoading(false);\r\n+        })\r\n+        .catch((err) => {\r\n+          console.error(\"Availability fetch error:\", err);\r\n+          setLoading(false);\r\n+        });\r\n     };\r\n \r\n     fetchData(); // first call\r\n-    const interval = setInterval(fetchData, 30000); // ‡§π‡§∞ 30 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§™‡§∞ refresh\r\n+    const interval = setInterval(fetchData, 30000); // refresh every 30 seconds\r\n     return () => clearInterval(interval);\r\n   }, []);\r\n \r\n   const data = summary[view] || {};\r\n \r\n+  if (loading) {\r\n+    return <div style={styles.container}>Loading availability...</div>;\r\n+  }\r\n+\r\n   return (\r\n     <div style={styles.container}>\r\n       <h2 style={styles.title}>üõèÔ∏è Room Availability</h2>\r\n+      <p style={{ textAlign: \"center\", marginBottom: \"30px\", fontSize: \"16px\", color: \"#555\" }}>\r\n+        Total Rooms: {TOTAL_ROOMS}\r\n+      </p>\r\n \r\n       <div style={styles.buttonGroup}>\r\n         <button style={view === \"daily\" ? styles.activeBtn : styles.btn} onClick={() => setView(\"daily\")}>Daily</button>\r\n         <button style={view === \"weekly\" ? styles.activeBtn : styles.btn} onClick={() => setView(\"weekly\")}>Weekly</button>\r\n@@ -33,19 +47,19 @@\n \r\n       <table style={styles.table}>\r\n         <thead>\r\n           <tr>\r\n-            <th>{view === \"daily\" ? \"Date\" : view === \"weekly\" ? \"Week\" : \"Month\"}</th>\r\n-            <th>Booked Rooms</th>\r\n-            <th>Available Rooms</th>\r\n+            <th style={styles.th}>{view === \"daily\" ? \"Date\" : view === \"weekly\" ? \"Week\" : \"Month\"}</th>\r\n+            <th style={styles.th}>Booked Rooms</th>\r\n+            <th style={styles.th}>Available Rooms</th>\r\n           </tr>\r\n         </thead>\r\n         <tbody>\r\n           {Object.entries(data).map(([key, booked]) => (\r\n             <tr key={key}>\r\n-              <td>{key}</td>\r\n-              <td>{booked}</td>\r\n-              <td>{TOTAL_ROOMS - booked < 0 ? 0 : TOTAL_ROOMS - booked}</td>\r\n+              <td style={styles.td}>{key}</td>\r\n+              <td style={styles.td}>{booked}</td>\r\n+              <td style={styles.td}>{TOTAL_ROOMS - booked < 0 ? 0 : TOTAL_ROOMS - booked}</td>\r\n             </tr>\r\n           ))}\r\n         </tbody>\r\n       </table>\r\n@@ -77,8 +91,9 @@\n     borderRadius: \"6px\",\r\n     background: \"#fff\",\r\n     color: \"#007bff\",\r\n     cursor: \"pointer\",\r\n+    transition: \"all 0.3s\",\r\n   },\r\n   activeBtn: {\r\n     margin: \"5px\",\r\n     padding: \"10px 20px\",\r\n@@ -90,11 +105,20 @@\n   },\r\n   table: {\r\n     width: \"100%\",\r\n     borderCollapse: \"collapse\",\r\n-    marginTop: \"20px\",\r\n     background: \"#fff\",\r\n     boxShadow: \"0 4px 8px rgba(0,0,0,0.1)\",\r\n   },\r\n+  th: {\r\n+    padding: \"12px 16px\",\r\n+    backgroundColor: \"#007bff\",\r\n+    color: \"#fff\",\r\n+    textAlign: \"left\",\r\n+  },\r\n+  td: {\r\n+    padding: \"12px 16px\",\r\n+    borderBottom: \"1px solid #ddd\",\r\n+  },\r\n };\r\n \r\n-export default Availability;\r\n+export default Availability;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1758514035499,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n import React, { useEffect, useState } from \"react\";\r\n \r\n-const TOTAL_ROOMS = 50;\r\n+const TOTAL_ROOMS = 20; // Updated to a more realistic number\r\n \r\n const Availability = () => {\r\n   const [summary, setSummary] = useState({ daily: {}, weekly: {}, monthly: {} });\r\n   const [view, setView] = useState(\"daily\");\r\n@@ -20,11 +20,11 @@\n           setLoading(false);\r\n         });\r\n     };\r\n \r\n-    fetchData(); // first call\r\n-    const interval = setInterval(fetchData, 30000); // refresh every 30 seconds\r\n-    return () => clearInterval(interval);\r\n+    fetchData(); \r\n+    const interval = setInterval(fetchData, 30000); \r\n+    return () => clearInterval(interval); \r\n   }, []);\r\n \r\n   const data = summary[view] || {};\r\n \r\n@@ -39,17 +39,17 @@\n         Total Rooms: {TOTAL_ROOMS}\r\n       </p>\r\n \r\n       <div style={styles.buttonGroup}>\r\n-        <button style={view === \"daily\" ? styles.activeBtn : styles.btn} onClick={() => setView(\"daily\")}>Daily</button>\r\n-        <button style={view === \"weekly\" ? styles.activeBtn : styles.btn} onClick={() => setView(\"weekly\")}>Weekly</button>\r\n-        <button style={view === \"monthly\" ? styles.activeBtn : styles.btn} onClick={() => setView(\"monthly\")}>Monthly</button>\r\n+        <button onClick={() => setView(\"daily\")} style={view === \"daily\" ? styles.activeBtn : styles.btn}>Daily</button>\r\n+        <button onClick={() => setView(\"weekly\")} style={view === \"weekly\" ? styles.activeBtn : styles.btn}>Weekly</button>\r\n+        <button onClick={() => setView(\"monthly\")} style={view === \"monthly\" ? styles.activeBtn : styles.btn}>Monthly</button>\r\n       </div>\r\n \r\n       <table style={styles.table}>\r\n         <thead>\r\n           <tr>\r\n-            <th style={styles.th}>{view === \"daily\" ? \"Date\" : view === \"weekly\" ? \"Week\" : \"Month\"}</th>\r\n+            <th style={styles.th}>Date</th>\r\n             <th style={styles.th}>Booked Rooms</th>\r\n             <th style={styles.th}>Available Rooms</th>\r\n           </tr>\r\n         </thead>\r\n@@ -109,16 +109,17 @@\n     background: \"#fff\",\r\n     boxShadow: \"0 4px 8px rgba(0,0,0,0.1)\",\r\n   },\r\n   th: {\r\n-    padding: \"12px 16px\",\r\n-    backgroundColor: \"#007bff\",\r\n+    padding: \"12px 15px\",\r\n+    backgroundColor: \"#4e73df\",\r\n     color: \"#fff\",\r\n     textAlign: \"left\",\r\n   },\r\n   td: {\r\n-    padding: \"12px 16px\",\r\n+    padding: \"12px 15px\",\r\n     borderBottom: \"1px solid #ddd\",\r\n+    fontSize: \"14px\",\r\n   },\r\n };\r\n \r\n export default Availability;\n\\ No newline at end of file\n"
                }
            ],
            "date": 1757270829864,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\r\n\r\nconst TOTAL_ROOMS = 50;\r\n\r\nconst Availability = () => {\r\n  const [summary, setSummary] = useState({ daily: {}, weekly: {}, monthly: {} });\r\n  const [view, setView] = useState(\"daily\");\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/api/bookings/summary\")\r\n      .then((res) => res.json())\r\n      .then((data) => setSummary(data))\r\n      .catch((err) => console.error(\"Availability fetch error:\", err));\r\n  }, []);\r\n\r\n  const data = summary[view] || {};\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <h2 style={styles.title}>üõèÔ∏è Room Availability</h2>\r\n\r\n      <div style={styles.buttonGroup}>\r\n        <button style={view === \"daily\" ? styles.activeBtn : styles.btn} onClick={() => setView(\"daily\")}>Daily</button>\r\n        <button style={view === \"weekly\" ? styles.activeBtn : styles.btn} onClick={() => setView(\"weekly\")}>Weekly</button>\r\n        <button style={view === \"monthly\" ? styles.activeBtn : styles.btn} onClick={() => setView(\"monthly\")}>Monthly</button>\r\n      </div>\r\n\r\n      <table style={styles.table}>\r\n        <thead>\r\n          <tr>\r\n            <th>{view === \"daily\" ? \"Date\" : view === \"weekly\" ? \"Week\" : \"Month\"}</th>\r\n            <th>Booked Rooms</th>\r\n            <th>Available Rooms</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {Object.entries(data).map(([key, booked]) => (\r\n            <tr key={key}>\r\n              <td>{key}</td>\r\n              <td>{booked}</td>\r\n              <td>{TOTAL_ROOMS - booked < 0 ? 0 : TOTAL_ROOMS - booked}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    padding: \"30px\",\r\n    background: \"#f8f9fc\",\r\n    minHeight: \"100vh\",\r\n    fontFamily: \"Segoe UI, sans-serif\",\r\n  },\r\n  title: {\r\n    textAlign: \"center\",\r\n    fontSize: \"28px\",\r\n    color: \"#343a40\",\r\n    marginBottom: \"20px\",\r\n  },\r\n  buttonGroup: {\r\n    textAlign: \"center\",\r\n    marginBottom: \"20px\",\r\n  },\r\n  btn: {\r\n    margin: \"5px\",\r\n    padding: \"10px 20px\",\r\n    border: \"1px solid #007bff\",\r\n    borderRadius: \"6px\",\r\n    background: \"#fff\",\r\n    color: \"#007bff\",\r\n    cursor: \"pointer\",\r\n  },\r\n  activeBtn: {\r\n    margin: \"5px\",\r\n    padding: \"10px 20px\",\r\n    border: \"1px solid #007bff\",\r\n    borderRadius: \"6px\",\r\n    background: \"#007bff\",\r\n    color: \"#fff\",\r\n    cursor: \"pointer\",\r\n  },\r\n  table: {\r\n    width: \"100%\",\r\n    borderCollapse: \"collapse\",\r\n    marginTop: \"20px\",\r\n    background: \"#fff\",\r\n    boxShadow: \"0 4px 8px rgba(0,0,0,0.1)\",\r\n  },\r\n};\r\n\r\nexport default Availability;\r\n"
        }
    ]
}