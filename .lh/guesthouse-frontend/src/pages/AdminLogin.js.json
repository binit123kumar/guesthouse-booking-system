{
    "sourceFile": "guesthouse-frontend/src/pages/AdminLogin.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1757273523311,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1757273762804,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n import React, { useState } from \"react\";\r\n import { useNavigate } from \"react-router-dom\";\r\n \r\n const AdminLogin = () => {\r\n-  const [formData, setFormData] = useState({ email: \"\", password: \"\" });\r\n+  const [formData, setFormData] = useState({ email: \"akuadmin@guest\", password: \"1234\" });\r\n   const [error, setError] = useState(\"\");\r\n   const navigate = useNavigate();\r\n \r\n   const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });\r\n"
                },
                {
                    "date": 1757273792524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n import React, { useState } from \"react\";\r\n import { useNavigate } from \"react-router-dom\";\r\n \r\n const AdminLogin = () => {\r\n-  const [formData, setFormData] = useState({ email: \"akuadmin@guest\", password: \"1234\" });\r\n+  const [formData, setFormData] = useState({ email: \"\", password: \"\" });\r\n   const [error, setError] = useState(\"\");\r\n   const navigate = useNavigate();\r\n \r\n   const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });\r\n"
                },
                {
                    "date": 1757274208318,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,57 +2,125 @@\n import React, { useState } from \"react\";\r\n import { useNavigate } from \"react-router-dom\";\r\n \r\n const AdminLogin = () => {\r\n-  const [formData, setFormData] = useState({ email: \"\", password: \"\" });\r\n+  const [email, setEmail] = useState(\"\");\r\n+  const [password, setPassword] = useState(\"\");\r\n   const [error, setError] = useState(\"\");\r\n   const navigate = useNavigate();\r\n \r\n-  const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });\r\n-\r\n-  const handleSubmit = async (e) => {\r\n+  const handleLogin = (e) => {\r\n     e.preventDefault();\r\n-    const { email, password } = formData;\r\n-    if (!email || !password) { setError(\"Please fill all fields.\"); return; }\r\n \r\n-    try {\r\n-      const res = await fetch(\"http://localhost:5000/api/login\", {\r\n-        method: \"POST\",\r\n-        headers: { \"Content-Type\": \"application/json\" },\r\n-        body: JSON.stringify(formData),\r\n-      });\r\n-      const data = await res.json();\r\n-      if (data.success) {\r\n-        localStorage.setItem(\"adminUser\", JSON.stringify(data.user));\r\n-        navigate(\"/admin/dashboard\");\r\n-      } else setError(data.message || \"Invalid credentials\");\r\n-    } catch {\r\n-      setError(\"⚠️ Server Error. Try again later.\");\r\n+    if (!email || !password) {\r\n+      setError(\"Please fill in all fields.\");\r\n+      return;\r\n     }\r\n+\r\n+    const storedUser = JSON.parse(localStorage.getItem(\"adminUser\"));\r\n+\r\n+    if (\r\n+      // ✅ Option 1: Hardcoded email\r\n+      (email.toLowerCase() === \"admin@aku.ac.in\" && password === \"admin123\") ||\r\n+\r\n+      // ✅ Option 2: Registered user\r\n+      (storedUser &&\r\n+        email.toLowerCase() === storedUser.email.toLowerCase() &&\r\n+        password === storedUser.password) ||\r\n+\r\n+      // ✅ Option 3: Classic admin\r\n+      (email === \"Admin\" && password === \"admin123\")\r\n+    ) {\r\n+      setError(\"\");\r\n+      navigate(\"/admin/dashboard\");\r\n+    } else {\r\n+      setError(\"Invalid credentials\");\r\n+    }\r\n   };\r\n \r\n   return (\r\n     <div style={styles.container}>\r\n-      <div style={styles.card}>\r\n-        <h2 style={styles.heading}>Admin Login</h2>\r\n-        <form onSubmit={handleSubmit} style={styles.form}>\r\n-          <input type=\"email\" name=\"email\" placeholder=\"Email\" value={formData.email} onChange={handleChange} style={styles.input} />\r\n-          <input type=\"password\" name=\"password\" placeholder=\"Password\" value={formData.password} onChange={handleChange} style={styles.input} />\r\n-          {error && <p style={styles.error}>{error}</p>}\r\n-          <button type=\"submit\" style={styles.button}>Login</button>\r\n-        </form>\r\n-      </div>\r\n+      <img src=\"/logo192.png\" alt=\"Admin Avatar\" style={styles.avatar} />\r\n+      <h2>Admin Login</h2>\r\n+\r\n+      <form onSubmit={handleLogin} style={styles.form}>\r\n+        <input\r\n+          type=\"email\"\r\n+          placeholder=\"Email\"\r\n+          value={email}\r\n+          onChange={(e) => setEmail(e.target.value)}\r\n+          style={styles.input}\r\n+        />\r\n+        <input\r\n+          type=\"password\"\r\n+          placeholder=\"Password\"\r\n+          value={password}\r\n+          onChange={(e) => setPassword(e.target.value)}\r\n+          style={styles.input}\r\n+        />\r\n+\r\n+        {error && <p style={styles.error}>{error}</p>}\r\n+\r\n+        <button type=\"submit\" style={styles.button}>Login</button>\r\n+      </form>\r\n+\r\n+      <p style={styles.registerText}>\r\n+        New User?{\" \"}\r\n+        <span style={styles.link} onClick={() => navigate(\"/register\")}>\r\n+          Register here\r\n+        </span>\r\n+      </p>\r\n     </div>\r\n   );\r\n };\r\n \r\n const styles = {\r\n-  container: { background: \"#f1f4f9\", minHeight: \"100vh\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\" },\r\n-  card: { background: \"#fff\", padding: \"40px\", borderRadius: \"12px\", boxShadow: \"0 6px 20px rgba(0,0,0,0.1)\", textAlign: \"center\", width: \"100%\", maxWidth: \"400px\" },\r\n-  heading: { fontSize: \"24px\", marginBottom: \"30px\", color: \"#333\" },\r\n-  form: { display: \"flex\", flexDirection: \"column\", gap: \"15px\" },\r\n-  input: { padding: \"12px\", fontSize: \"16px\", border: \"1px solid #ccc\", borderRadius: \"6px\" },\r\n-  button: { padding: \"12px\", fontSize: \"16px\", backgroundColor: \"#003366\", color: \"#fff\", border: \"none\", borderRadius: \"6px\", cursor: \"pointer\" },\r\n-  error: { color: \"red\", fontSize: \"14px\" },\r\n+  container: {\r\n+    maxWidth: \"400px\",\r\n+    margin: \"auto\",\r\n+    padding: \"40px\",\r\n+    textAlign: \"center\",\r\n+    border: \"1px solid #ccc\",\r\n+    borderRadius: \"10px\",\r\n+    marginTop: \"100px\",\r\n+    boxShadow: \"0 4px 8px rgba(0,0,0,0.1)\",\r\n+    background: \"#fff\",\r\n+  },\r\n+  avatar: {\r\n+    width: \"80px\",\r\n+    marginBottom: \"20px\",\r\n+  },\r\n+  form: {\r\n+    display: \"flex\",\r\n+    flexDirection: \"column\",\r\n+    gap: \"15px\",\r\n+  },\r\n+  input: {\r\n+    padding: \"10px\",\r\n+    fontSize: \"16px\",\r\n+  },\r\n+  button: {\r\n+    padding: \"10px\",\r\n+    fontSize: \"16px\",\r\n+    backgroundColor: \"#007bff\",\r\n+    color: \"#fff\",\r\n+    border: \"none\",\r\n+    borderRadius: \"5px\",\r\n+    cursor: \"pointer\",\r\n+  },\r\n+  error: {\r\n+    color: \"red\",\r\n+    fontSize: \"14px\",\r\n+  },\r\n+  registerText: {\r\n+    marginTop: \"20px\",\r\n+    fontSize: \"14px\",\r\n+    color: \"#333\",\r\n+  },\r\n+  link: {\r\n+    color: \"#007bff\",\r\n+    cursor: \"pointer\",\r\n+    textDecoration: \"underline\",\r\n+  },\r\n };\r\n \r\n export default AdminLogin;\r\n"
                },
                {
                    "date": 1758514073465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,17 +18,12 @@\n \r\n     const storedUser = JSON.parse(localStorage.getItem(\"adminUser\"));\r\n \r\n     if (\r\n-      // ✅ Option 1: Hardcoded email\r\n       (email.toLowerCase() === \"admin@aku.ac.in\" && password === \"admin123\") ||\r\n-\r\n-      // ✅ Option 2: Registered user\r\n       (storedUser &&\r\n         email.toLowerCase() === storedUser.email.toLowerCase() &&\r\n         password === storedUser.password) ||\r\n-\r\n-      // ✅ Option 3: Classic admin\r\n       (email === \"Admin\" && password === \"admin123\")\r\n     ) {\r\n       setError(\"\");\r\n       navigate(\"/admin/dashboard\");\r\n@@ -40,9 +35,8 @@\n   return (\r\n     <div style={styles.container}>\r\n       <img src=\"/logo192.png\" alt=\"Admin Avatar\" style={styles.avatar} />\r\n       <h2>Admin Login</h2>\r\n-\r\n       <form onSubmit={handleLogin} style={styles.form}>\r\n         <input\r\n           type=\"email\"\r\n           placeholder=\"Email\"\r\n@@ -96,16 +90,18 @@\n   },\r\n   input: {\r\n     padding: \"10px\",\r\n     fontSize: \"16px\",\r\n+    borderRadius: \"5px\",\r\n+    border: \"1px solid #ddd\",\r\n   },\r\n   button: {\r\n-    padding: \"10px\",\r\n-    fontSize: \"16px\",\r\n+    padding: \"12px\",\r\n     backgroundColor: \"#007bff\",\r\n     color: \"#fff\",\r\n     border: \"none\",\r\n     borderRadius: \"5px\",\r\n+    fontSize: \"16px\",\r\n     cursor: \"pointer\",\r\n   },\r\n   error: {\r\n     color: \"red\",\r\n@@ -113,14 +109,14 @@\n   },\r\n   registerText: {\r\n     marginTop: \"20px\",\r\n     fontSize: \"14px\",\r\n-    color: \"#333\",\r\n+    color: \"#555\",\r\n   },\r\n   link: {\r\n     color: \"#007bff\",\r\n     cursor: \"pointer\",\r\n     textDecoration: \"underline\",\r\n   },\r\n };\r\n \r\n-export default AdminLogin;\r\n+export default AdminLogin;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1758551503112,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n-// src/pages/AdminLogin.js\r\n+// src/pages/AdminLogin.js (Updated)\r\n import React, { useState } from \"react\";\r\n import { useNavigate } from \"react-router-dom\";\r\n+import { login } from \"../utils/auth\"; // Import the login function\r\n \r\n const AdminLogin = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n@@ -25,8 +26,9 @@\n         password === storedUser.password) ||\r\n       (email === \"Admin\" && password === \"admin123\")\r\n     ) {\r\n       setError(\"\");\r\n+      login(); // ✅ Log the user in using the new function\r\n       navigate(\"/admin/dashboard\");\r\n     } else {\r\n       setError(\"Invalid credentials\");\r\n     }\r\n@@ -35,8 +37,9 @@\n   return (\r\n     <div style={styles.container}>\r\n       <img src=\"/logo192.png\" alt=\"Admin Avatar\" style={styles.avatar} />\r\n       <h2>Admin Login</h2>\r\n+\r\n       <form onSubmit={handleLogin} style={styles.form}>\r\n         <input\r\n           type=\"email\"\r\n           placeholder=\"Email\"\r\n@@ -90,18 +93,16 @@\n   },\r\n   input: {\r\n     padding: \"10px\",\r\n     fontSize: \"16px\",\r\n-    borderRadius: \"5px\",\r\n-    border: \"1px solid #ddd\",\r\n   },\r\n   button: {\r\n-    padding: \"12px\",\r\n+    padding: \"10px\",\r\n+    fontSize: \"16px\",\r\n     backgroundColor: \"#007bff\",\r\n     color: \"#fff\",\r\n     border: \"none\",\r\n     borderRadius: \"5px\",\r\n-    fontSize: \"16px\",\r\n     cursor: \"pointer\",\r\n   },\r\n   error: {\r\n     color: \"red\",\r\n@@ -109,9 +110,9 @@\n   },\r\n   registerText: {\r\n     marginTop: \"20px\",\r\n     fontSize: \"14px\",\r\n-    color: \"#555\",\r\n+    color: \"#333\",\r\n   },\r\n   link: {\r\n     color: \"#007bff\",\r\n     cursor: \"pointer\",\r\n"
                },
                {
                    "date": 1758552478864,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n // src/pages/AdminLogin.js (Updated)\r\n import React, { useState } from \"react\";\r\n import { useNavigate } from \"react-router-dom\";\r\n-import { login } from \"../utils/auth\"; // Import the login function\r\n+import { login } from \"../utils/auth\"; \r\n \r\n const AdminLogin = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n@@ -26,9 +26,9 @@\n         password === storedUser.password) ||\r\n       (email === \"Admin\" && password === \"admin123\")\r\n     ) {\r\n       setError(\"\");\r\n-      login(); // ✅ Log the user in using the new function\r\n+      login(); // ✅ Log the user in\r\n       navigate(\"/admin/dashboard\");\r\n     } else {\r\n       setError(\"Invalid credentials\");\r\n     }\r\n"
                }
            ],
            "date": 1757273523311,
            "name": "Commit-0",
            "content": "// src/pages/AdminLogin.js\r\nimport React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst AdminLogin = () => {\r\n  const [formData, setFormData] = useState({ email: \"\", password: \"\" });\r\n  const [error, setError] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const { email, password } = formData;\r\n    if (!email || !password) { setError(\"Please fill all fields.\"); return; }\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/login\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(formData),\r\n      });\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        localStorage.setItem(\"adminUser\", JSON.stringify(data.user));\r\n        navigate(\"/admin/dashboard\");\r\n      } else setError(data.message || \"Invalid credentials\");\r\n    } catch {\r\n      setError(\"⚠️ Server Error. Try again later.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <h2 style={styles.heading}>Admin Login</h2>\r\n        <form onSubmit={handleSubmit} style={styles.form}>\r\n          <input type=\"email\" name=\"email\" placeholder=\"Email\" value={formData.email} onChange={handleChange} style={styles.input} />\r\n          <input type=\"password\" name=\"password\" placeholder=\"Password\" value={formData.password} onChange={handleChange} style={styles.input} />\r\n          {error && <p style={styles.error}>{error}</p>}\r\n          <button type=\"submit\" style={styles.button}>Login</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: { background: \"#f1f4f9\", minHeight: \"100vh\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\" },\r\n  card: { background: \"#fff\", padding: \"40px\", borderRadius: \"12px\", boxShadow: \"0 6px 20px rgba(0,0,0,0.1)\", textAlign: \"center\", width: \"100%\", maxWidth: \"400px\" },\r\n  heading: { fontSize: \"24px\", marginBottom: \"30px\", color: \"#333\" },\r\n  form: { display: \"flex\", flexDirection: \"column\", gap: \"15px\" },\r\n  input: { padding: \"12px\", fontSize: \"16px\", border: \"1px solid #ccc\", borderRadius: \"6px\" },\r\n  button: { padding: \"12px\", fontSize: \"16px\", backgroundColor: \"#003366\", color: \"#fff\", border: \"none\", borderRadius: \"6px\", cursor: \"pointer\" },\r\n  error: { color: \"red\", fontSize: \"14px\" },\r\n};\r\n\r\nexport default AdminLogin;\r\n"
        }
    ]
}