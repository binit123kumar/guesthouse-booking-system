{
    "sourceFile": "guesthouse-frontend/src/pages/AdminDashboard.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1757270428050,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1757271394041,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,12 +10,18 @@\n     cashPayments: 0,\r\n   });\r\n \r\n   useEffect(() => {\r\n-    fetch(\"http://localhost:5000/api/admin/dashboard\")\r\n-      .then((res) => res.json())\r\n-      .then((data) => setStats(data))\r\n-      .catch((err) => console.error(\"Dashboard fetch error:\", err));\r\n+    const fetchData = () => {\r\n+      fetch(\"http://localhost:5000/api/admin/dashboard\")\r\n+        .then((res) => res.json())\r\n+        .then((data) => setStats(data))\r\n+        .catch((err) => console.error(\"Dashboard fetch error:\", err));\r\n+    };\r\n+\r\n+    fetchData(); // first call\r\n+    const interval = setInterval(fetchData, 30000); // à¤¹à¤° 30 à¤¸à¥‡à¤•à¤‚à¤¡ à¤ªà¤° refresh\r\n+    return () => clearInterval(interval); // cleanup\r\n   }, []);\r\n \r\n   const handleLogout = () => {\r\n     navigate(\"/admin/login\");\r\n"
                },
                {
                    "date": 1758513597890,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,10 @@\n const AdminDashboard = () => {\r\n   const navigate = useNavigate();\r\n   const [stats, setStats] = useState({\r\n     totalBookings: 0,\r\n+    pendingBookings: 0,\r\n+    declinedBookings: 0,\r\n     availableRooms: 0,\r\n     onlinePayments: 0,\r\n     cashPayments: 0,\r\n   });\r\n@@ -17,11 +19,11 @@\n         .then((data) => setStats(data))\r\n         .catch((err) => console.error(\"Dashboard fetch error:\", err));\r\n     };\r\n \r\n-    fetchData(); // first call\r\n-    const interval = setInterval(fetchData, 30000); // à¤¹à¤° 30 à¤¸à¥‡à¤•à¤‚à¤¡ à¤ªà¤° refresh\r\n-    return () => clearInterval(interval); // cleanup\r\n+    fetchData();\r\n+    const interval = setInterval(fetchData, 30000);\r\n+    return () => clearInterval(interval);\r\n   }, []);\r\n \r\n   const handleLogout = () => {\r\n     navigate(\"/admin/login\");\r\n@@ -30,24 +32,34 @@\n   return (\r\n     <div style={styles.container}>\r\n       <h1 style={styles.title}>ðŸ“Š Admin Dashboard</h1>\r\n       <div style={styles.cardGrid}>\r\n-        <div style={{ ...styles.card, backgroundColor: \"#4e73df\" }} onClick={() => navigate(\"/admin/bookings\")}>\r\n+        <div style={{ ...styles.card, backgroundColor: \"#4e73df\" }}>\r\n           <h3 style={styles.cardTitle}>Total Bookings</h3>\r\n           <p style={styles.cardValue}>{stats.totalBookings}</p>\r\n         </div>\r\n \r\n-        <div style={{ ...styles.card, backgroundColor: \"#1cc88a\" }} onClick={() => navigate(\"/admin/rooms\")}>\r\n+        <div style={{ ...styles.card, backgroundColor: \"#f6c23e\" }} onClick={() => navigate(\"/admin/pending-bookings\")}>\r\n+          <h3 style={styles.cardTitle}>Pending Requests</h3>\r\n+          <p style={styles.cardValue}>{stats.pendingBookings}</p>\r\n+        </div>\r\n+\r\n+        <div style={{ ...styles.card, backgroundColor: \"#e74a3b\" }} onClick={() => navigate(\"/admin/declined-bookings\")}>\r\n+          <h3 style={styles.cardTitle}>Declined Bookings</h3>\r\n+          <p style={styles.cardValue}>{stats.declinedBookings}</p>\r\n+        </div>\r\n+        \r\n+        <div style={{ ...styles.card, backgroundColor: \"#1cc88a\" }}>\r\n           <h3 style={styles.cardTitle}>Available Rooms</h3>\r\n           <p style={styles.cardValue}>{stats.availableRooms}</p>\r\n         </div>\r\n \r\n-        <div style={{ ...styles.card, backgroundColor: \"#36b9cc\" }} onClick={() => navigate(\"/admin/online\")}>\r\n+        <div style={{ ...styles.card, backgroundColor: \"#36b9cc\" }}>\r\n           <h3 style={styles.cardTitle}>Online Payments</h3>\r\n           <p style={styles.cardValue}>{stats.onlinePayments}</p>\r\n         </div>\r\n \r\n-        <div style={{ ...styles.card, backgroundColor: \"#f6c23e\", color: \"#000\" }} onClick={() => navigate(\"/admin/cash\")}>\r\n+        <div style={{ ...styles.card, backgroundColor: \"#555\" }}>\r\n           <h3 style={styles.cardTitle}>Cash Payments</h3>\r\n           <p style={styles.cardValue}>{stats.cashPayments}</p>\r\n         </div>\r\n       </div>\r\n@@ -107,5 +119,5 @@\n     transition: \"background-color 0.3s ease\",\r\n   },\r\n };\r\n \r\n-export default AdminDashboard;\r\n+export default AdminDashboard;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1758551533597,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,16 +1,18 @@\n+// src/pages/AdminDashboard.js (Updated)\r\n import React, { useEffect, useState } from \"react\";\r\n import { useNavigate } from \"react-router-dom\";\r\n+import { logout } from \"../utils/auth\"; // Import the logout function\r\n \r\n const AdminDashboard = () => {\r\n   const navigate = useNavigate();\r\n   const [stats, setStats] = useState({\r\n     totalBookings: 0,\r\n-    pendingBookings: 0,\r\n-    declinedBookings: 0,\r\n     availableRooms: 0,\r\n     onlinePayments: 0,\r\n     cashPayments: 0,\r\n+    pendingBookings: 0,\r\n+    declinedBookings: 0,\r\n   });\r\n \r\n   useEffect(() => {\r\n     const fetchData = () => {\r\n@@ -19,47 +21,43 @@\n         .then((data) => setStats(data))\r\n         .catch((err) => console.error(\"Dashboard fetch error:\", err));\r\n     };\r\n \r\n-    fetchData();\r\n-    const interval = setInterval(fetchData, 30000);\r\n-    return () => clearInterval(interval);\r\n+    fetchData(); \r\n+    const interval = setInterval(fetchData, 30000); \r\n+    return () => clearInterval(interval); \r\n   }, []);\r\n \r\n   const handleLogout = () => {\r\n+    logout(); // âœ… Use the logout function\r\n     navigate(\"/admin/login\");\r\n   };\r\n \r\n   return (\r\n     <div style={styles.container}>\r\n       <h1 style={styles.title}>ðŸ“Š Admin Dashboard</h1>\r\n       <div style={styles.cardGrid}>\r\n-        <div style={{ ...styles.card, backgroundColor: \"#4e73df\" }}>\r\n+        <div style={{ ...styles.card, backgroundColor: \"#4e73df\" }} onClick={() => navigate(\"/admin/bookings\")}>\r\n           <h3 style={styles.cardTitle}>Total Bookings</h3>\r\n           <p style={styles.cardValue}>{stats.totalBookings}</p>\r\n         </div>\r\n-\r\n         <div style={{ ...styles.card, backgroundColor: \"#f6c23e\" }} onClick={() => navigate(\"/admin/pending-bookings\")}>\r\n           <h3 style={styles.cardTitle}>Pending Requests</h3>\r\n           <p style={styles.cardValue}>{stats.pendingBookings}</p>\r\n         </div>\r\n-\r\n         <div style={{ ...styles.card, backgroundColor: \"#e74a3b\" }} onClick={() => navigate(\"/admin/declined-bookings\")}>\r\n           <h3 style={styles.cardTitle}>Declined Bookings</h3>\r\n           <p style={styles.cardValue}>{stats.declinedBookings}</p>\r\n         </div>\r\n-        \r\n-        <div style={{ ...styles.card, backgroundColor: \"#1cc88a\" }}>\r\n+        <div style={{ ...styles.card, backgroundColor: \"#1cc88a\" }} onClick={() => navigate(\"/admin/availability\")}>\r\n           <h3 style={styles.cardTitle}>Available Rooms</h3>\r\n           <p style={styles.cardValue}>{stats.availableRooms}</p>\r\n         </div>\r\n-\r\n-        <div style={{ ...styles.card, backgroundColor: \"#36b9cc\" }}>\r\n+        <div style={{ ...styles.card, backgroundColor: \"#36b9cc\" }} onClick={() => navigate(\"/admin/online\")}>\r\n           <h3 style={styles.cardTitle}>Online Payments</h3>\r\n           <p style={styles.cardValue}>{stats.onlinePayments}</p>\r\n         </div>\r\n-\r\n-        <div style={{ ...styles.card, backgroundColor: \"#555\" }}>\r\n+        <div style={{ ...styles.card, backgroundColor: \"#858796\", color: \"#fff\" }} onClick={() => navigate(\"/admin/cash\")}>\r\n           <h3 style={styles.cardTitle}>Cash Payments</h3>\r\n           <p style={styles.cardValue}>{stats.cashPayments}</p>\r\n         </div>\r\n       </div>\r\n"
                }
            ],
            "date": 1757270428050,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst AdminDashboard = () => {\r\n  const navigate = useNavigate();\r\n  const [stats, setStats] = useState({\r\n    totalBookings: 0,\r\n    availableRooms: 0,\r\n    onlinePayments: 0,\r\n    cashPayments: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/api/admin/dashboard\")\r\n      .then((res) => res.json())\r\n      .then((data) => setStats(data))\r\n      .catch((err) => console.error(\"Dashboard fetch error:\", err));\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    navigate(\"/admin/login\");\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <h1 style={styles.title}>ðŸ“Š Admin Dashboard</h1>\r\n      <div style={styles.cardGrid}>\r\n        <div style={{ ...styles.card, backgroundColor: \"#4e73df\" }} onClick={() => navigate(\"/admin/bookings\")}>\r\n          <h3 style={styles.cardTitle}>Total Bookings</h3>\r\n          <p style={styles.cardValue}>{stats.totalBookings}</p>\r\n        </div>\r\n\r\n        <div style={{ ...styles.card, backgroundColor: \"#1cc88a\" }} onClick={() => navigate(\"/admin/rooms\")}>\r\n          <h3 style={styles.cardTitle}>Available Rooms</h3>\r\n          <p style={styles.cardValue}>{stats.availableRooms}</p>\r\n        </div>\r\n\r\n        <div style={{ ...styles.card, backgroundColor: \"#36b9cc\" }} onClick={() => navigate(\"/admin/online\")}>\r\n          <h3 style={styles.cardTitle}>Online Payments</h3>\r\n          <p style={styles.cardValue}>{stats.onlinePayments}</p>\r\n        </div>\r\n\r\n        <div style={{ ...styles.card, backgroundColor: \"#f6c23e\", color: \"#000\" }} onClick={() => navigate(\"/admin/cash\")}>\r\n          <h3 style={styles.cardTitle}>Cash Payments</h3>\r\n          <p style={styles.cardValue}>{stats.cashPayments}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <button style={styles.logoutButton} onClick={handleLogout}>ðŸ”“ Logout</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    padding: \"40px\",\r\n    background: \"#f8f9fc\",\r\n    minHeight: \"100vh\",\r\n    fontFamily: \"Segoe UI, sans-serif\",\r\n  },\r\n  title: {\r\n    textAlign: \"center\",\r\n    fontSize: \"36px\",\r\n    color: \"#343a40\",\r\n    marginBottom: \"40px\",\r\n  },\r\n  cardGrid: {\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\",\r\n    gap: \"20px\",\r\n    marginBottom: \"50px\",\r\n  },\r\n  card: {\r\n    padding: \"30px\",\r\n    borderRadius: \"12px\",\r\n    color: \"#fff\",\r\n    boxShadow: \"0 6px 20px rgba(0,0,0,0.1)\",\r\n    textAlign: \"center\",\r\n    cursor: \"pointer\",\r\n    transition: \"transform 0.2s\",\r\n  },\r\n  cardTitle: {\r\n    fontSize: \"20px\",\r\n    marginBottom: \"10px\",\r\n  },\r\n  cardValue: {\r\n    fontSize: \"36px\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  logoutButton: {\r\n    display: \"block\",\r\n    margin: \"auto\",\r\n    padding: \"14px 32px\",\r\n    fontSize: \"16px\",\r\n    border: \"none\",\r\n    borderRadius: \"8px\",\r\n    backgroundColor: \"#e74a3b\",\r\n    color: \"#fff\",\r\n    cursor: \"pointer\",\r\n    boxShadow: \"0 4px 10px rgba(0,0,0,0.2)\",\r\n    transition: \"background-color 0.3s ease\",\r\n  },\r\n};\r\n\r\nexport default AdminDashboard;\r\n"
        }
    ]
}