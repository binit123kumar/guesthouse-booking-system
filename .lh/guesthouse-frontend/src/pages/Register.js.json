{
    "sourceFile": "guesthouse-frontend/src/pages/Register.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1757273474612,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1757274075933,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,70 +2,158 @@\n import React, { useState } from \"react\";\r\n import { useNavigate } from \"react-router-dom\";\r\n \r\n const Register = () => {\r\n-  const [formData, setFormData] = useState({ name: \"\", email: \"\", phone: \"\", password: \"\" });\r\n+  const [formData, setFormData] = useState({\r\n+    name: \"\",\r\n+    email: \"\",\r\n+    phone: \"\",\r\n+    password: \"\",\r\n+  });\r\n+\r\n   const [error, setError] = useState(\"\");\r\n   const navigate = useNavigate();\r\n \r\n-  const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });\r\n+  const handleChange = (e) => {\r\n+    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n+  };\r\n \r\n-  const handleSubmit = async (e) => {\r\n+  const handleSubmit = (e) => {\r\n     e.preventDefault();\r\n+\r\n     const { name, email, phone, password } = formData;\r\n     if (!name || !email || !phone || !password) {\r\n       setError(\"Please fill in all fields.\");\r\n       return;\r\n     }\r\n-    try {\r\n-      const res = await fetch(\"http://localhost:5000/api/register\", {\r\n-        method: \"POST\",\r\n-        headers: { \"Content-Type\": \"application/json\" },\r\n-        body: JSON.stringify(formData),\r\n-      });\r\n-      const data = await res.json();\r\n-      if (data.success) {\r\n-        alert(\"Registration Successful!\");\r\n-        setFormData({ name: \"\", email: \"\", phone: \"\", password: \"\" });\r\n-        setError(\"\");\r\n-        navigate(\"/admin/login\");\r\n-      } else setError(data.message || \"Registration failed\");\r\n-    } catch {\r\n-      setError(\"⚠️ Server Error. Try again later.\");\r\n-    }\r\n+\r\n+    // ✅ Save user to localStorage\r\n+    localStorage.setItem(\"adminUser\", JSON.stringify(formData));\r\n+\r\n+    setError(\"\");\r\n+    alert(\"Registration Successful!\");\r\n+    setFormData({ name: \"\", email: \"\", phone: \"\", password: \"\" });\r\n+    navigate(\"/admin/login\"); // optional: auto redirect to login\r\n   };\r\n \r\n   return (\r\n     <div style={styles.container}>\r\n       <div style={styles.card}>\r\n         <img src=\"/logo192.png\" alt=\"Logo\" style={styles.logo} />\r\n         <h2 style={styles.heading}>New User Registration</h2>\r\n+\r\n         <form onSubmit={handleSubmit} style={styles.form}>\r\n-          <input type=\"text\" name=\"name\" placeholder=\"Full Name\" value={formData.name} onChange={handleChange} style={styles.input} />\r\n-          <input type=\"email\" name=\"email\" placeholder=\"Email\" value={formData.email} onChange={handleChange} style={styles.input} />\r\n-          <input type=\"tel\" name=\"phone\" placeholder=\"Phone Number\" value={formData.phone} onChange={handleChange} style={styles.input} />\r\n-          <input type=\"password\" name=\"password\" placeholder=\"Password\" value={formData.password} onChange={handleChange} style={styles.input} />\r\n+          <input\r\n+            type=\"text\"\r\n+            name=\"name\"\r\n+            placeholder=\"Full Name\"\r\n+            value={formData.name}\r\n+            onChange={handleChange}\r\n+            style={styles.input}\r\n+          />\r\n+          <input\r\n+            type=\"email\"\r\n+            name=\"email\"\r\n+            placeholder=\"Email\"\r\n+            value={formData.email}\r\n+            onChange={handleChange}\r\n+            style={styles.input}\r\n+          />\r\n+          <input\r\n+            type=\"tel\"\r\n+            name=\"phone\"\r\n+            placeholder=\"Phone Number\"\r\n+            value={formData.phone}\r\n+            onChange={handleChange}\r\n+            style={styles.input}\r\n+          />\r\n+          <input\r\n+            type=\"password\"\r\n+            name=\"password\"\r\n+            placeholder=\"Password\"\r\n+            value={formData.password}\r\n+            onChange={handleChange}\r\n+            style={styles.input}\r\n+          />\r\n+\r\n           {error && <p style={styles.error}>{error}</p>}\r\n+\r\n           <button type=\"submit\" style={styles.button}>Register</button>\r\n         </form>\r\n+\r\n         <p style={styles.loginText}>\r\n-          Already registered? <span style={styles.link} onClick={() => navigate(\"/admin/login\")}>Login here</span>\r\n+          Already registered?{\" \"}\r\n+          <span\r\n+            style={styles.link}\r\n+            onClick={() => navigate(\"/admin/login\")}\r\n+          >\r\n+            Login here\r\n+          </span>\r\n         </p>\r\n       </div>\r\n     </div>\r\n   );\r\n };\r\n \r\n const styles = {\r\n-  container: { background: \"#f1f4f9\", minHeight: \"100vh\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\" },\r\n-  card: { background: \"#fff\", padding: \"40px\", borderRadius: \"12px\", boxShadow: \"0 6px 20px rgba(0,0,0,0.1)\", textAlign: \"center\", width: \"100%\", maxWidth: \"420px\" },\r\n-  logo: { width: \"70px\", marginBottom: \"20px\" },\r\n-  heading: { fontSize: \"24px\", marginBottom: \"30px\", color: \"#333\" },\r\n-  form: { display: \"flex\", flexDirection: \"column\", gap: \"15px\" },\r\n-  input: { padding: \"12px\", fontSize: \"16px\", border: \"1px solid #ccc\", borderRadius: \"6px\" },\r\n-  button: { padding: \"12px\", fontSize: \"16px\", backgroundColor: \"#007bff\", color: \"#fff\", border: \"none\", borderRadius: \"6px\", cursor: \"pointer\" },\r\n-  error: { color: \"red\", fontSize: \"14px\" },\r\n-  loginText: { marginTop: \"20px\", fontSize: \"14px\", color: \"#333\" },\r\n-  link: { color: \"#007bff\", cursor: \"pointer\", textDecoration: \"underline\" },\r\n+  container: {\r\n+    background: \"#f1f4f9\",\r\n+    minHeight: \"100vh\",\r\n+    display: \"flex\",\r\n+    justifyContent: \"center\",\r\n+    alignItems: \"center\",\r\n+  },\r\n+  card: {\r\n+    background: \"#fff\",\r\n+    padding: \"40px\",\r\n+    borderRadius: \"12px\",\r\n+    boxShadow: \"0 6px 20px rgba(0,0,0,0.1)\",\r\n+    textAlign: \"center\",\r\n+    width: \"100%\",\r\n+    maxWidth: \"420px\",\r\n+  },\r\n+  logo: {\r\n+    width: \"70px\",\r\n+    marginBottom: \"20px\",\r\n+  },\r\n+  heading: {\r\n+    fontSize: \"24px\",\r\n+    marginBottom: \"30px\",\r\n+    color: \"#333\",\r\n+  },\r\n+  form: {\r\n+    display: \"flex\",\r\n+    flexDirection: \"column\",\r\n+    gap: \"15px\",\r\n+  },\r\n+  input: {\r\n+    padding: \"12px\",\r\n+    fontSize: \"16px\",\r\n+    border: \"1px solid #ccc\",\r\n+    borderRadius: \"6px\",\r\n+  },\r\n+  button: {\r\n+    padding: \"12px\",\r\n+    fontSize: \"16px\",\r\n+    backgroundColor: \"#007bff\",\r\n+    color: \"#fff\",\r\n+    border: \"none\",\r\n+    borderRadius: \"6px\",\r\n+    cursor: \"pointer\",\r\n+  },\r\n+  error: {\r\n+    color: \"red\",\r\n+    fontSize: \"14px\",\r\n+  },\r\n+  loginText: {\r\n+    marginTop: \"20px\",\r\n+    fontSize: \"14px\",\r\n+    color: \"#333\",\r\n+  },\r\n+  link: {\r\n+    color: \"#007bff\",\r\n+    cursor: \"pointer\",\r\n+    textDecoration: \"underline\",\r\n+  },\r\n };\r\n \r\n export default Register;\r\n"
                }
            ],
            "date": 1757273474612,
            "name": "Commit-0",
            "content": "// src/pages/Register.js\r\nimport React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Register = () => {\r\n  const [formData, setFormData] = useState({ name: \"\", email: \"\", phone: \"\", password: \"\" });\r\n  const [error, setError] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const { name, email, phone, password } = formData;\r\n    if (!name || !email || !phone || !password) {\r\n      setError(\"Please fill in all fields.\");\r\n      return;\r\n    }\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/register\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(formData),\r\n      });\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        alert(\"Registration Successful!\");\r\n        setFormData({ name: \"\", email: \"\", phone: \"\", password: \"\" });\r\n        setError(\"\");\r\n        navigate(\"/admin/login\");\r\n      } else setError(data.message || \"Registration failed\");\r\n    } catch {\r\n      setError(\"⚠️ Server Error. Try again later.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <img src=\"/logo192.png\" alt=\"Logo\" style={styles.logo} />\r\n        <h2 style={styles.heading}>New User Registration</h2>\r\n        <form onSubmit={handleSubmit} style={styles.form}>\r\n          <input type=\"text\" name=\"name\" placeholder=\"Full Name\" value={formData.name} onChange={handleChange} style={styles.input} />\r\n          <input type=\"email\" name=\"email\" placeholder=\"Email\" value={formData.email} onChange={handleChange} style={styles.input} />\r\n          <input type=\"tel\" name=\"phone\" placeholder=\"Phone Number\" value={formData.phone} onChange={handleChange} style={styles.input} />\r\n          <input type=\"password\" name=\"password\" placeholder=\"Password\" value={formData.password} onChange={handleChange} style={styles.input} />\r\n          {error && <p style={styles.error}>{error}</p>}\r\n          <button type=\"submit\" style={styles.button}>Register</button>\r\n        </form>\r\n        <p style={styles.loginText}>\r\n          Already registered? <span style={styles.link} onClick={() => navigate(\"/admin/login\")}>Login here</span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: { background: \"#f1f4f9\", minHeight: \"100vh\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\" },\r\n  card: { background: \"#fff\", padding: \"40px\", borderRadius: \"12px\", boxShadow: \"0 6px 20px rgba(0,0,0,0.1)\", textAlign: \"center\", width: \"100%\", maxWidth: \"420px\" },\r\n  logo: { width: \"70px\", marginBottom: \"20px\" },\r\n  heading: { fontSize: \"24px\", marginBottom: \"30px\", color: \"#333\" },\r\n  form: { display: \"flex\", flexDirection: \"column\", gap: \"15px\" },\r\n  input: { padding: \"12px\", fontSize: \"16px\", border: \"1px solid #ccc\", borderRadius: \"6px\" },\r\n  button: { padding: \"12px\", fontSize: \"16px\", backgroundColor: \"#007bff\", color: \"#fff\", border: \"none\", borderRadius: \"6px\", cursor: \"pointer\" },\r\n  error: { color: \"red\", fontSize: \"14px\" },\r\n  loginText: { marginTop: \"20px\", fontSize: \"14px\", color: \"#333\" },\r\n  link: { color: \"#007bff\", cursor: \"pointer\", textDecoration: \"underline\" },\r\n};\r\n\r\nexport default Register;\r\n"
        }
    ]
}